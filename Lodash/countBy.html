<script>
    function _countBy(array, iterate){
        var func;
        var obj = {};
        if(typeof(iterate) == 'string'){
            func = function(obj){
                return obj.length;
            }
        }
        else{
            func = iterate;
        }
        for(var val of array){
            if(obj[func(val)] == undefined){
                obj[func(val)] = 1;
            }
            else{
                obj[func(val)]++;
            }
        }
        return obj;
    }
</script>